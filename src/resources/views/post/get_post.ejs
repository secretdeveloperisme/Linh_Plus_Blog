<!DOCTYPE html>
<html lang="en">

<head>
  <%- include("../partials/head") %>
    <title>Post</title>
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/get_post.css">
</head>

<body>
  <div class="app">
    <header class="sticky-top">
      <% if(user) {%>
        <%- include("../partials/nav",{user:user}) %>
          <%}else {%>
            <%- include("../partials/nav") %>
              <% } %>
    </header>
    <div class="main px-4">
      <div class="sidebar pt-2 pb-5">
        <ul class="nav nav-pills flex-column mb-auto">
          <li class="text-center">
            <button class="btn rounded-circle 
            <% if(like){ %>
              <% if(like.TypeLike == "like"){ %>
                <%= "active" %>  
              <% } %> 
            <% } %> 
            " data-post-id="<%= post.id %>" id="btnLike"><i class="far fa-heart" aria-hidden="true"></i></button>
            <div id="amountOfLike"><%= amountOfLikes %></div>
          </li>
          <li class="text-center">
            <button class="btn rounded-circle 
            <% if(like){ %>
              <% if(like.TypeLike == "dislike"){ %>
                <%= "active" %>  
              <% } %> 
            <% } %> 
             " id="btnDislike" data-post-id="<%= post.id %>"><i class="fas fa-heart-broken"
                aria-hidden="true"></i></button>
            <div id="amountOfDislike"><%= amountOfDisLikes %></div>
          </li>
          <li class="text-center">
            <button class="btn rounded-circle" id="btnBookmark"><i class="far fa-bookmark"
                aria-hidden="true"></i></button>
            <div id="amountBookmark">7</div>
          </li>
          <li class="text-center dropend">
            <button class="btn rounded-circle" data-bs-toggle="dropdown" arial-expanded="false"><i
                class="fas fa-ellipsis-h"></i></button>
            <ul class="dropdown-menu">
              <li class="btn dropdown-item d-flex" id="btnCopy">
                <span>Copy Link</span>
                <i class="far fa-copy ms-auto"></i>
              </li>
            </ul>
          </li>

          <li class="nav-connect">
            <ul class="connect-me list-style-none d-flex justify-content-center p-0">
              <li class="p-2"><a href=""><i class="fab fa-facebook" aria-hidden="true"></i></a></li>
              <li class="p-2"><a href=""><i class="fab fa-github" aria-hidden="true"></i></i></a></li>
              <li class="p-2"><a href=""><i class="fab fa-linkedin" aria-hidden="true"></i></a></li>
              <li class="p-2"><a href=""><i class="fab fa-blogger" aria-hidden="true"></i></a></li>
            </ul>
          </li>
        </ul>
      </div>
      <div class="content row mt-3">
        <% if(post) {%> 
        <div class="post bg-white col-xl-9">
          <div class="post-header my-2">
            <div class="post-avatar rounded"
              style="background-image: url('<%= post.image %>')"></div>
            <div class="post-author px-3 d-flex align-items-center my-2">
              <div class="post-author__avatar rounded-circle icon-64"
                style="background-image: url('<%= post.User.avatar %>');">
              </div>
              <div class="post-author-info  ms-3">
                <h5 class="post-author__name"><%= post.User.username %> </h5>
                <div class="post-createdAt">Post At <span><%= post.createdAt %></span></div>
              </div>
            </div>
            <div class="post-main">
              <h1 class="post-main-title">
                <%= post.title %> 
              </h1>
              <h5 class="text-secondary"><%= post.description %></h5>
              <div class="post-main-tags d-flex my-3">
                <% post.Tags.forEach(tag=>{ %>
                  <a class="post-tag" href="/search/tag/<%= tag.id %>">#<%= tag.name %></a>
                <% }) %> 
              </div>
              <div class="ql-snow">
                <div class="post-content ql-editor">
                  <%- post.content %>
                </div>
              </div>
            </div>
          </div>
          <div class="my-2">
            <h3>Discussion (<span>7</span>)</h3>
            <form action="" class="comment-form">
              <div class="d-flex mb-2">
                <div class="icon-64 me-2"
                  style="background-image: url('/images/avatars/213fe880455d8803d14c_212022T191342.jpg');"></div>
                <div class="mb-2 flex-grow-1 w-100">
                  <div class="">
                    <div class="ql-editor" id="commentEditor"></div>
                  </div>
                  <button class="btn btn-primary mt-3">Submit</button>
                </div>
              </div>
              <input type="hidden" name="comment-id" value="0">
              <input type="hidden" name="post-slug" value="slug">
            </form>
            <div class="comments">
              <div class="comment" data-comment-node="0">
                <div class="d-flex comment-wrapper--deep-0">
                  <div class="icon-32 me-2"
                    style="background-image: url('/images/avatars/213fe880455d8803d14c_212022T191342.jpg');"></div>
                  <div class="w-100">
                    <div class="comment-detail p-3 border border-light w-100 ">
                      <div class="comment-header d-flex">
                        <h5 class="comment__author-name me-2">
                          hoang linh
                        </h5>
                        <div class="comment-createdAt">
                          06/03/20000
                        </div>
                      </div>
                      <div class="comment-content">
                        Nice post as usual! For the version, there's a SemanticVersion type in the standard library. For
                        some reason I can't paste links from my cellphone here, no idea why.
                      </div>
                      <div class="comment-action">
                        <button class="btn comment-like-btn" data-post-slug="slug" data-comment-id="1"><i class="far fa-heart"></i> <span>3</span> Likes</button>
                        <button class="btn comment-reply-btn" data-comment-id="1" data-post-slug="slug"><i class="far fa-comment"></i> Reply</button>
                      </div>
                    </div>
                    <div class="d-flex mt-2 comment-wrapper--deep-1">
                      <div class="icon-32 me-2"
                        style="background-image: url('/images/avatars/213fe880455d8803d14c_212022T191342.jpg');"></div>
                      <div class="w-100">
                        <div class="comment-detail p-3 border border-light w-100 ">
                          <div class="comment-header d-flex">
                            <h5 class="comment__author-name me-2">
                              hoang linh
                            </h5>
                            <div class="comment-createdAt">
                              06/03/20000
                            </div>
                          </div>
                          <div class="comment-content">
                            Nice post as usual! For the version, there's a SemanticVersion type in the standard library.
                            For some reason I can't paste links from my cellphone here, no idea why.
                          </div>
                          <div class="comment-action">
                            <button class="btn comment-like-btn" data-post-slug="slug" data-comment-id="2"><i class="far fa-heart"></i> <span>3</span> Likes</button>
                            <button class="btn comment-reply-btn" data-comment-id="2" data-post-slug="slug"><i class="far fa-comment"></i> Reply</button>
                          </div>
                        </div>
                        <div class="d-flex mt-2 comment-wrapper--deep-2">
                          <div class="icon-32 me-2"
                            style="background-image: url('/images/avatars/213fe880455d8803d14c_212022T191342.jpg');"></div>
                          <div class="w-100">
                            <div class="comment-detail p-3 border border-light w-100 ">
                              <div class="comment-header d-flex">
                                <h5 class="comment__author-name me-2">
                                  hoang linh
                                </h5>
                                <div class="comment-createdAt">
                                  06/03/20000
                                </div>
                              </div>
                              <div class="comment-content">
                                Nice post as usual! For the version, there's a SemanticVersion type in the standard library.
                                For some reason I can't paste links from my cellphone here, no idea why.
                              </div>
                              <div class="comment-action">
                                <button class="btn comment-like-btn" data-post-slug="slug" data-comment-id="3"><i class="far fa-heart"></i> <span>3</span> Likes</button>
                                <button class="btn comment-reply-btn" data-comment-id="3" data-post-slug="slug"><i class="far fa-comment"></i> Reply</button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <% } %> 
        <div class="col-xl-3">
          <div class="author bg-white p-3">
            <div class="author-header d-flex align-items-center mb-3">
              <div class="icon-64 author__avatar" style="background-image: url('<%= post.User.avatar %>');"></div>
              <h5 class="author__name ms-3"><%= post.User.username %></h5>
            </div>
            <button class="btn btn-primary w-100" data-action="follow" data-userId="<%= post.User.id %>">Follow</button>
            <div class="author-biography py-2 text-center"><%= post.User.biography %></div>
            <div class="author-email">
              <h6>Email</h6>
              <span><%= post.User.email %></span>
            </div>
            <div class="author-gender">
              <h6>Gender</h6>
              <span><%= (post.User.gender === 'm')?"Male":"Female" %></span>
            </div>
            <div class="author-age">
              <h6>Age</h6>
              <span><%= post.User.age %></span>
            </div>
            <div class="author-gender">
              <h6>Address</h6>
              <span><%= post.User.address %></span>
            </div>
          </div>
        </div>
        <footer class="col-xl-12">
          <%- include("../partials/footer.ejs") %>
        </footer>
      </div>
    </div>
    <ul class="nav-mobile list-style-none">
      <li class="top-link">
        <div class="btn rounded-circle btn-danger shadow" onclick="window.scrollTo({top:0})">
          <i class="fa fa-arrow-up" aria-hidden="true"></i>
        </div>
      </li>
    </ul>
  </div>
  <%- include("../auth/login") %>
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script src="/js/home.js"></script>
    <script src="/js/login.js"></script>
    <script src="/js/GetPost.js"></script>
</body>

</html>